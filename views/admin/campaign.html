<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketing Campaigns Management Page</title>
    <script src="validateMarketingForm.js"></script>
    <link rel="stylesheet" href="./css/campaign.css">
    <style>
        
        /* Chrome, Safari, Edge, Opera */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        
        /* Firefox */
        input[type=number] {
          -moz-appearance: textfield;
        }

        form, option, input, textarea {
            font-size: 1.5rem;
        }
    </style>
    
</head>
<body onload=getID()>
    <div class="title">
        <p>Marketing Campaigns Management Page</p>
        <p>Fill in the input to update marketing campaign to MySQL database</p>
    </div>
    
    <div class="campaignForm">
        <form method="POST" action="/admin/campaign" enctype="multipart/form-data" onsubmit="return validateForm()">

            <label class="label" for="id">Input product ID</label>
            <input type="number" id="id" name="productID" list="ids">
            <datalist id="ids">
            </datalist>
            
            <br><br>
        
            <label class="label" for="photo">Choose product photo</label>
            <input type="file" id="photo" name="productCampaign">

            <br><br>

            <label class="label" for="story">Input product story</label>
            <textarea id="story" name="productStory" rows="4"></textarea>

            <br>

            <input type="submit">
            
        </form>
    </div>
<script>
    var idList = document.getElementById('ids');  

    function getID() {
        var request = new XMLHttpRequest();
        request.onreadystatechange = function () {
            if (request.readyState === 4) {
                let idArr = request.responseText.split(',');
                for (let i = 0; i < idArr.length; i++){
                    var idOption = document.createElement('option');
                    if (i === 0){
                        idOption.innerHTML = idArr[i].substr(1,idArr[i].length);
                    } else if (i === idArr.length-1) {
                        idOption.innerHTML = idArr[i].substr(0,idArr[i].length-1);
                    } else {
                        idOption.innerHTML = idArr[i]
                    }
                    idList.appendChild(idOption)
                }
            }
        }
        request.open('GET','/admin/campaignIDS');
        request.send();
    }

</script>
</body>
</html>